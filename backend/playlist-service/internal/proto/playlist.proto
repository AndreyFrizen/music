syntax = "proto3";

package playlist;

import "google/api/annotations.proto";

option go_package = "/playlist";

service UserService {
    rpc CreatePlaylist(CreatePlaylistRequest) returns (CreatePlaylistResponse){
        option (google.api.http) = {
            post: "/playlists"
            body: "*"
        };
    };
    rpc DeletePlaylist(DeletePlaylistRequest) returns (DeletePlaylistResponse){
        option (google.api.http) = {
            delete: "/playlists/{id}"
        };
    };
    rpc GetPlaylist(GetPlaylistRequest) returns (GetPlaylistResponse){
        option (google.api.http) = {
            get: "/playlists/{id}"
        };
    };
    rpc UpdatePlaylist(UpdatePlaylistRequest) returns (UpdatePlaylistResponse){
        option (google.api.http) = {
            patch: "/playlists/{id}"
            body: "*"
        };
    };
    rpc AddTrackToPlaylist(AddTrackToPlaylistRequest) returns (AddTrackToPlaylistResponse){
        option (google.api.http) = {
            post: "/playlists/{playlistId}/tracks"
            body: "*"
        };
    };
    rpc DeleteTrackFromPlaylist(DeleteTrackRequest) returns (DeleteTrackResponse){
        option (google.api.http) = {
            delete: "/playlists/{playlistId}/tracks/{trackId}"
        };
    };
}

// struct plalistTrack
message PlaylistTrack {
    int64 trackId = 1;
    int64 playlistId = 2;
    int64 position = 3;
}

// struct playlist
message Playlist {
    int64 id = 1;
    int64 userId = 2;
    string title = 3;
    repeated PlaylistTrack tracks = 4;
}

// add track to playlist
message AddTrackToPlaylistRequest {
    int64 trackId = 2;
    int64 playlistId = 3;
}

message AddTrackToPlaylistResponse {
    int64 id = 1;
}

// delete track from playlist
message DeleteTrackRequest {
    int64 trackId = 1;
    int64 playlistId = 2;
}

message DeleteTrackResponse {
    int64 id = 1;
}

// get playlist
message GetPlaylistRequest {
    int64 id = 1;
}

message GetPlaylistResponse {
    Playlist playlist = 1;
}

// update playlist
message UpdatePlaylistRequest {
    int64 id = 1;
    string title = 2;
}

message UpdatePlaylistResponse {
    Playlist playlist = 1;
}

// delete playlist
message DeletePlaylistRequest {
    int64 id = 1;
}

message DeletePlaylistResponse {
    int64 id = 1;
}

// create playlist
message CreatePlaylistRequest {
    string title = 1;
}

message CreatePlaylistResponse {
    Playlist playlist = 1;
}
